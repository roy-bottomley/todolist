%script= render "users/app_initializer.js.erb"
.any{'ng-controller' => 'usersController'}
  %flash
  .top-section
    %h1
      {{user.email}}
    %li= link_to "Log Out", destroy_user_session_path
    %li= link_to "Log In", new_user_session_path
    %div{'ng-repeat'=> 'location in weather.locations', 'ng-include' => "'weather.html'"}
  .any{'ng-controller' => 'tasklistsController'}
    .tasklist-section
      %h2 Tasklists
      .new-task-list
        %input#tasklistNewName{'ng-model' => 'newTaskName'}
        %button{'ng-click' => 'create()'} Add New Tasklist
      %p{'ng-hide'=>'user.tasklists.length > 0'}
        You have no tasklists
      %ul{'ng-show'=>'user.tasklists.length > 0'}
        %li{'ng-repeat'=>'tasklist in user.tasklists | orderBy:sortMethod:sortDirection ',  'ng-include' => "'tasklist.html'"}

    .task-section{'ng-controller' => 'tasksController'}
      %h2 tasks
      .new-task
        %textarea#taskNewDescription{'ng-model' => 'newTaskDescription'}
        %button{'ng-click' => 'create()'} Add New Task
      %p{'ng-hide'=>'currentTaskList.tasks.length > 0'}
        This tasklist has no tasks
      %ul{'ng-show'=>'currentTaskList.tasks.length > 0'}
        %li{'ng-repeat'=>'task in currentTaskList.tasks  | orderBy:sortMethod:sortDirection', 'ng-include' => "'task.html'"}

